{
  "version": "1.0",
  "about": {
    "description": "Generated from a docker compose file for use on Cycle.io.",
    "version": ""
  },
  "containers": {
    "minio": {
      "config": {
        "network": {
          "public": "enable",
          "hostname": "minio",
          "ports": [
            "9000"
          ]
        },
        "deploy": {
          "instances": 1,
          "health_check": {
            "command": "curl -f http://localhost:9000/minio/health/live",
            "retries": 5,
            "interval": "15s",
            "timeout": "20s",
            "restart": true,
            "delay": "0s"
          }
        },
        "runtime": {
          "command": {
            "path": "sh",
            "args": "/entrypoint.sh"
          },
          "environment_vars": {
            "MINIO_ROOT_USER": "loki",
            "MINIO_ROOT_PASSWORD": "supersecret",
            "MINIO_PROMETHEUS_AUTH_TYPE": "public",
            "MINIO_UPDATE": "off"
          }
        }
      },
      "name": "minio",
      "lock": true,
      "image": {
        "origin": {
          "type": "docker-file",
          "details": {
            "context_dir": "/telemetry/minio",
            "build_file": "/telemetry/minio/Dockerfile"
          }
        }
      },
      "stateful": true,
      "volumes": [
        {
          "destination": "/data",
          "read_only": false,
          "local": {
            "max_size": "200GB"
          }
        }
      ]
    },
    "grafana-dashboard": {
      "config": {
        "network": {
          "public": "enable",
          "hostname": "grafana-dashboard",
          "ports": [
            "3000:3000",
            "443:3000"
          ]
        },
        "deploy": {
          "instances": 1,
          "health_check": {
            "command": "\"wget --no-verbose --tries=1 --spider http://localhost:3000/api/health || exit 1\"",
            "retries": 5,
            "interval": "10s",
            "timeout": "5s",
            "restart": true,
            "delay": "0s"
          }
        },
        "runtime": {
          "command": {
            "path": "sh",
            "args": "/run.sh"
          },
          "environment_vars": {
            "GF_PATHS_PROVISIONING": "/etc/grafana/provisioning",
            "GF_AUTH_ANONYMOUS_ENABLED": "true",
            "GF_AUTH_ANONYMOUS_ORG_ROLE": "Admin"
          }
        }
      },
      "name": "grafana-dashboard",
      "lock": true,
      "image": {
        "origin": {
          "type": "docker-file",
          "details": {
            "context_dir": "/telemetry/grafana-dashboard",
            "build_file": "/telemetry/grafana-dashboard/Dockerfile"
          }
        }
      },
      "stateful": false
    },
    "grafana-loki": {
      "config": {
        "network": {
          "public": "egress-only",
          "hostname": "grafana-loki",
          "ports": [
            "3100:3100",
            "7946:7946"
          ]
        },
        "deploy": {
          "instances": 1
        },
        "runtime": {
          "command": {
            "path": "/usr/bin/loki",
            "args": "-config.file=/etc/loki/config.yaml -target=all -legacy-read-mode=false"
          }
        }
      },
      "name": "grafana-loki",
      "lock": false,
      "image": {
        "origin": {
          "type": "docker-file",
          "details": {
            "context_dir": "/telemetry/grafana-loki",
            "build_file": "/telemetry/grafana-loki/Dockerfile"
          }
        }
      },
      "stateful": true,
      "volumes": [
        {
          "destination": "/loki",
          "read_only": false,
          "local": {
            "max_size": "25GB"
          }
        }
      ]
    },
    "grafana-mimir": {
      "config": {
        "network": {
          "public": "egress-only",
          "hostname": "grafana-mimir",
          "ports": [
            "9009:9009"
          ]
        },
        "deploy": {
          "instances": 1
        },
        "runtime": {
          "command": {
            "path": "/bin/mimir",
            "args": "-config.file=/etc/mimir/config.yaml"
          }
        }
      },
      "name": "grafana-mimir",
      "lock": false,
      "image": {
        "origin": {
          "type": "docker-file",
          "details": {
            "context_dir": "/telemetry/grafana-mimir",
            "build_file": "/telemetry/grafana-mimir/Dockerfile"
          }
        }
      },
      "stateful": true,
      "volumes": [
        {
          "destination": "/mimir",
          "read_only": false,
          "local": {
            "max_size": "25GB"
          }
        }
      ]
    }
  }
}